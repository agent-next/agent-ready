# Factory-Compatible Agent Readiness Profile
# Evaluates repositories against the 9 Pillars / 5 Levels model

name: factory_compat
version: "1.0.0"
description: >
  Default profile for evaluating repository maturity for AI agent readiness.
  Based on the 9 Pillars model with 5 maturity levels (L1-L5).

checks:
  # =============================================================================
  # PILLAR: Documentation (docs)
  # =============================================================================

  - id: docs.readme
    name: README exists
    description: Repository has a README file
    type: any_of
    pillar: docs
    level: L1
    required: true
    checks:
      - id: docs.readme_upper
        type: file_exists
        name: README.md (uppercase)
        pillar: docs
        level: L1
        required: false
        path: README.md
      - id: docs.readme_mixed
        type: file_exists
        name: Readme.md (mixed case)
        pillar: docs
        level: L1
        required: false
        path: Readme.md
      - id: docs.readme_lower
        type: file_exists
        name: readme.md (lowercase)
        pillar: docs
        level: L1
        required: false
        path: readme.md
      - id: docs.readme_rst
        type: file_exists
        name: README.rst (reStructuredText)
        pillar: docs
        level: L1
        required: false
        path: README.rst

  - id: docs.readme_sections
    name: README has essential sections
    description: README contains getting started, installation, and usage info
    type: any_of
    pillar: docs
    level: L2
    required: false
    checks:
      - id: docs.readme_sections_upper
        type: file_exists
        name: README.md sections
        pillar: docs
        level: L2
        required: false
        path: README.md
        content_regex: "(installation|getting started|usage|quick start)"
        case_sensitive: false
      - id: docs.readme_sections_mixed
        type: file_exists
        name: Readme.md sections
        pillar: docs
        level: L2
        required: false
        path: Readme.md
        content_regex: "(installation|getting started|usage|quick start)"
        case_sensitive: false
      - id: docs.readme_sections_lower
        type: file_exists
        name: readme.md sections
        pillar: docs
        level: L2
        required: false
        path: readme.md
        content_regex: "(installation|getting started|usage|quick start)"
        case_sensitive: false

  - id: docs.contributing
    name: Contributing guide
    description: Repository has contributing guidelines
    type: any_of
    pillar: docs
    level: L2
    required: false
    checks:
      - id: docs.contributing_md
        type: file_exists
        name: CONTRIBUTING.md
        pillar: docs
        level: L2
        required: false
        path: CONTRIBUTING.md
      - id: docs.contributing_rst
        type: file_exists
        name: CONTRIBUTING.rst
        pillar: docs
        level: L2
        required: false
        path: CONTRIBUTING.rst
      - id: docs.contributing_docs
        type: file_exists
        name: docs/contributing.rst
        pillar: docs
        level: L2
        required: false
        path: docs/contributing.rst
      - id: docs.contributing_docs_md
        type: file_exists
        name: docs/contributing.md
        pillar: docs
        level: L2
        required: false
        path: docs/contributing.md
      - id: docs.contributing_docs_dir
        type: path_glob
        name: Contributing in docs directory
        pillar: docs
        level: L2
        required: false
        pattern: "docs/**/contributing*"
        min_matches: 1

  - id: docs.agents_md
    name: AGENTS.md exists
    description: Repository has agent instructions file (recommended for AI readiness)
    type: any_of
    pillar: docs
    level: L2
    required: false
    checks:
      - id: docs.agents_md.standard
        name: Standard AGENTS.md
        description: AGENTS.md in root
        type: file_exists
        pillar: docs
        level: L2
        required: false
        path: AGENTS.md
      - id: docs.agents_md.claude
        name: Claude AGENTS.md
        description: CLAUDE.md (alias for AGENTS.md)
        type: file_exists
        pillar: docs
        level: L2
        required: false
        path: CLAUDE.md

  - id: docs.changelog
    name: Changelog exists
    description: Repository maintains a changelog
    type: any_of
    pillar: docs
    level: L3
    required: false
    checks:
      - id: docs.changelog.standard
        name: Standard CHANGELOG
        type: file_exists
        pillar: docs
        level: L3
        required: false
        path: CHANGELOG.md
      - id: docs.changelog.history
        name: HISTORY.md
        type: file_exists
        pillar: docs
        level: L3
        required: false
        path: HISTORY.md
      - id: docs.changelog.changes
        name: CHANGES.md
        type: file_exists
        pillar: docs
        level: L3
        required: false
        path: CHANGES.md
      - id: docs.changelog.changes_rst
        name: CHANGES.rst
        type: file_exists
        pillar: docs
        level: L3
        required: false
        path: CHANGES.rst

  # =============================================================================
  # PILLAR: Code Style (style)
  # =============================================================================

  - id: style.editorconfig
    name: EditorConfig
    description: EditorConfig file for consistent formatting
    type: file_exists
    pillar: style
    level: L1
    required: false
    path: .editorconfig

  - id: style.linter_config
    name: Linter configuration
    description: Linter/formatter config exists (ESLint, Ruff, golangci-lint, etc.)
    type: any_of
    pillar: style
    level: L2
    required: false
    checks:
      - id: style.eslint
        type: path_glob
        name: ESLint config
        pillar: style
        level: L2
        required: false
        pattern: ".eslint*"
      - id: style.prettier
        type: path_glob
        name: Prettier config
        pillar: style
        level: L2
        required: false
        pattern: ".prettier*"
      - id: style.biome
        type: file_exists
        name: Biome config
        pillar: style
        level: L2
        required: false
        path: biome.json
      - id: style.ruff
        type: file_exists
        name: Ruff config (Python)
        pillar: style
        level: L2
        required: false
        path: ruff.toml
      - id: style.pyproject_ruff
        type: file_exists
        name: pyproject.toml (may contain ruff/black config)
        pillar: style
        level: L2
        required: false
        path: pyproject.toml
        content_regex: "(ruff|black|flake8|pylint)"
      - id: style.golangci
        type: file_exists
        name: golangci-lint config
        pillar: style
        level: L2
        required: false
        path: .golangci.yml
      - id: style.rustfmt
        type: file_exists
        name: rustfmt config
        pillar: style
        level: L2
        required: false
        path: rustfmt.toml
      - id: style.clippy
        type: file_exists
        name: clippy config
        pillar: style
        level: L2
        required: false
        path: clippy.toml

  - id: style.type_checking
    name: Type checking configuration
    description: Type checking config (TypeScript, mypy, etc.)
    type: any_of
    pillar: style
    level: L2
    required: false
    checks:
      - id: style.typescript
        type: file_exists
        name: TypeScript config
        pillar: style
        level: L2
        required: false
        path: tsconfig.json
      - id: style.mypy
        type: file_exists
        name: mypy config (Python)
        pillar: style
        level: L2
        required: false
        path: mypy.ini
      - id: style.pyproject_mypy
        type: file_exists
        name: pyproject.toml with mypy
        pillar: style
        level: L2
        required: false
        path: pyproject.toml
        content_regex: "(mypy|pyright)"
      - id: style.pyrightconfig
        type: file_exists
        name: Pyright config
        pillar: style
        level: L2
        required: false
        path: pyrightconfig.json

  - id: style.precommit_hooks
    name: Pre-commit hooks
    description: Pre-commit hooks configured for code quality
    type: any_of
    pillar: style
    level: L2
    required: false
    checks:
      - id: style.husky
        type: path_glob
        name: Husky hooks
        pillar: style
        level: L2
        required: false
        pattern: ".husky/*"
      - id: style.precommit_config
        type: file_exists
        name: Pre-commit config
        pillar: style
        level: L2
        required: false
        path: .pre-commit-config.yaml
      - id: style.lefthook
        type: file_exists
        name: Lefthook config
        pillar: style
        level: L2
        required: false
        path: lefthook.yml

  # =============================================================================
  # PILLAR: Build System (build)
  # =============================================================================

  - id: build.package_manifest
    name: Package manifest
    description: Package manifest exists (package.json, pyproject.toml, go.mod, Cargo.toml, etc.)
    type: any_of
    pillar: build
    level: L1
    required: true
    checks:
      - id: build.package_json
        type: file_exists
        name: package.json (Node.js)
        pillar: build
        level: L1
        required: false
        path: package.json
      - id: build.pyproject_toml
        type: file_exists
        name: pyproject.toml (Python)
        pillar: build
        level: L1
        required: false
        path: pyproject.toml
      - id: build.setup_py
        type: file_exists
        name: setup.py (Python)
        pillar: build
        level: L1
        required: false
        path: setup.py
      - id: build.go_mod
        type: file_exists
        name: go.mod (Go)
        pillar: build
        level: L1
        required: false
        path: go.mod
      - id: build.cargo_toml
        type: file_exists
        name: Cargo.toml (Rust)
        pillar: build
        level: L1
        required: false
        path: Cargo.toml
      - id: build.pom_xml
        type: file_exists
        name: pom.xml (Java/Maven)
        pillar: build
        level: L1
        required: false
        path: pom.xml
      - id: build.build_gradle
        type: file_exists
        name: build.gradle (Java/Gradle)
        pillar: build
        level: L1
        required: false
        path: build.gradle
      - id: build.gemfile
        type: file_exists
        name: Gemfile (Ruby)
        pillar: build
        level: L1
        required: false
        path: Gemfile
      - id: build.makefile
        type: file_exists
        name: Makefile
        pillar: build
        level: L1
        required: false
        path: Makefile

  - id: build.scripts
    name: Build scripts defined
    description: Build and test scripts are defined
    type: build_command_detect
    pillar: build
    level: L2
    required: false
    commands: ["build", "test"]
    files: ["package.json", "Makefile", "pyproject.toml", "setup.py", "Cargo.toml", "go.mod"]

  - id: build.lock_file
    name: Lock file exists
    description: Dependency lock file for reproducible builds
    type: any_of
    pillar: build
    level: L2
    required: false
    checks:
      - id: build.npm_lock
        type: file_exists
        name: npm lock
        pillar: build
        level: L2
        required: false
        path: package-lock.json
      - id: build.yarn_lock
        type: file_exists
        name: yarn lock
        pillar: build
        level: L2
        required: false
        path: yarn.lock
      - id: build.pnpm_lock
        type: file_exists
        name: pnpm lock
        pillar: build
        level: L2
        required: false
        path: pnpm-lock.yaml
      - id: build.cargo_lock
        type: file_exists
        name: Cargo.lock (Rust)
        pillar: build
        level: L2
        required: false
        path: Cargo.lock
      - id: build.go_sum
        type: file_exists
        name: go.sum (Go)
        pillar: build
        level: L2
        required: false
        path: go.sum
      - id: build.poetry_lock
        type: file_exists
        name: poetry.lock (Python)
        pillar: build
        level: L2
        required: false
        path: poetry.lock
      - id: build.pipfile_lock
        type: file_exists
        name: Pipfile.lock (Python)
        pillar: build
        level: L2
        required: false
        path: Pipfile.lock
      - id: build.gemfile_lock
        type: file_exists
        name: Gemfile.lock (Ruby)
        pillar: build
        level: L2
        required: false
        path: Gemfile.lock
      - id: build.uv_lock
        type: file_exists
        name: uv.lock (Python/uv)
        pillar: build
        level: L2
        required: false
        path: uv.lock
      - id: build.requirements_txt
        type: file_exists
        name: requirements.txt (Python)
        pillar: build
        level: L2
        required: false
        path: requirements.txt

  # =============================================================================
  # PILLAR: Testing (test)
  # =============================================================================

  - id: test.test_files
    name: Test files exist
    description: Project has test files
    type: any_of
    pillar: test
    level: L1
    required: false
    checks:
      - id: test.test_files_js
        type: path_glob
        name: JS/TS test files
        pillar: test
        level: L1
        required: false
        pattern: "**/*.{test,spec}.{js,ts,jsx,tsx}"
        min_matches: 1
      - id: test.test_files_py
        type: path_glob
        name: Python test files
        pillar: test
        level: L1
        required: false
        pattern: "**/test_*.py"
        min_matches: 1
      - id: test.test_files_py_alt
        type: path_glob
        name: Python test files (alt)
        pillar: test
        level: L1
        required: false
        pattern: "**/*_test.py"
        min_matches: 1
      - id: test.test_files_go
        type: path_glob
        name: Go test files
        pillar: test
        level: L1
        required: false
        pattern: "**/*_test.go"
        min_matches: 1
      - id: test.test_files_rust
        type: path_glob
        name: Rust test files
        pillar: test
        level: L1
        required: false
        pattern: "**/tests/**/*.rs"
        min_matches: 1
      - id: test.tests_directory
        type: path_glob
        name: Tests directory
        pillar: test
        level: L1
        required: false
        pattern: "tests/**/*"
        min_matches: 1

  - id: test.config
    name: Test configuration
    description: Test framework configuration exists
    type: any_of
    pillar: test
    level: L2
    required: false
    checks:
      - id: test.jest_config
        type: path_glob
        name: Jest config
        pillar: test
        level: L2
        required: false
        pattern: "jest.config.*"
      - id: test.vitest_config
        type: path_glob
        name: Vitest config
        pillar: test
        level: L2
        required: false
        pattern: "vitest.config.*"
      - id: test.mocha_config
        type: file_exists
        name: Mocha config
        pillar: test
        level: L2
        required: false
        path: .mocharc.json
      # Python test configs
      - id: test.pytest_ini
        type: file_exists
        name: pytest.ini (Python)
        pillar: test
        level: L2
        required: false
        path: pytest.ini
      - id: test.conftest
        type: file_exists
        name: conftest.py (pytest)
        pillar: test
        level: L2
        required: false
        path: conftest.py
      - id: test.setup_cfg_pytest
        type: file_exists
        name: setup.cfg (Python)
        pillar: test
        level: L2
        required: false
        path: setup.cfg
        content_regex: "(pytest|tool:pytest)"
      - id: test.tox_ini
        type: file_exists
        name: tox.ini (Python)
        pillar: test
        level: L2
        required: false
        path: tox.ini
      - id: test.pyproject_pytest
        type: file_exists
        name: pyproject.toml with pytest
        pillar: test
        level: L2
        required: false
        path: pyproject.toml
        content_regex: "(pytest|tool\\.pytest)"
      # Go test configs
      - id: test.go_test_main
        type: path_glob
        name: Go test main
        pillar: test
        level: L2
        required: false
        pattern: "**/*_test.go"
        min_matches: 1

  - id: test.integration_tests
    name: Integration tests
    description: Integration test files exist
    type: any_of
    pillar: test
    level: L3
    required: false
    checks:
      - id: test.integration_dir
        type: path_glob
        name: Integration test directory (JS/TS)
        pillar: test
        level: L3
        required: false
        pattern: "**/integration/**/*.{test,spec}.{js,ts,jsx,tsx}"
      - id: test.integration_files
        type: path_glob
        name: Integration test files (JS/TS)
        pillar: test
        level: L3
        required: false
        pattern: "**/*.integration.{test,spec}.{js,ts,jsx,tsx}"
      - id: test.integration_py
        type: path_glob
        name: Integration tests (Python)
        pillar: test
        level: L3
        required: false
        pattern: "**/integration/**/test_*.py"
      - id: test.integration_py_alt
        type: path_glob
        name: Integration tests (Python alt)
        pillar: test
        level: L3
        required: false
        pattern: "**/test_integration*.py"
      - id: test.integration_go
        type: path_glob
        name: Integration tests (Go)
        pillar: test
        level: L3
        required: false
        pattern: "**/*_integration_test.go"
      - id: test.integration_e2e
        type: path_glob
        name: E2E tests directory
        pillar: test
        level: L3
        required: false
        pattern: "**/e2e/**/*.{test,spec,py,go,rs}"

  # =============================================================================
  # PILLAR: Security (security)
  # =============================================================================

  - id: security.gitignore
    name: .gitignore exists
    description: Git ignore file to prevent committing sensitive files
    type: file_exists
    pillar: security
    level: L1
    required: true
    path: .gitignore

  - id: security.gitignore_secrets
    name: .gitignore covers secrets
    description: .gitignore includes common secret patterns
    type: file_exists
    pillar: security
    level: L2
    required: false
    path: .gitignore
    content_regex: "(\\.env|\\.secret|credentials)"

  - id: security.dependabot
    name: Dependabot configuration
    description: Automated dependency updates configured
    type: file_exists
    pillar: security
    level: L3
    required: false
    path: .github/dependabot.yml

  - id: security.codeowners
    name: CODEOWNERS file
    description: Code ownership defined for review routing
    type: any_of
    pillar: security
    level: L3
    required: false
    checks:
      - id: security.codeowners_github
        type: file_exists
        name: GitHub CODEOWNERS
        pillar: security
        level: L3
        required: false
        path: .github/CODEOWNERS
      - id: security.codeowners_root
        type: file_exists
        name: Root CODEOWNERS
        pillar: security
        level: L3
        required: false
        path: CODEOWNERS
      - id: security.codeowners_docs
        type: file_exists
        name: Docs CODEOWNERS
        pillar: security
        level: L3
        required: false
        path: docs/CODEOWNERS

  # =============================================================================
  # PILLAR: Observability (observability)
  # =============================================================================

  - id: observability.logging
    name: Logging framework
    description: Structured logging framework is used
    type: log_framework_detect
    pillar: observability
    level: L3
    required: false
    frameworks: ["winston", "pino", "bunyan", "log4js", "loguru", "structlog", "zap", "zerolog", "logrus", "tracing", "env_logger", "slog"]

  - id: observability.tracing
    name: Distributed tracing
    description: Distributed tracing instrumentation configured
    type: dependency_detect
    pillar: observability
    level: L4
    required: false
    packages:
      - "@opentelemetry/sdk-trace-node"
      - "@opentelemetry/api"
      - "dd-trace"
      - "jaeger-client"
      - "@sentry/tracing"
      - "opentelemetry-sdk"
      - "ddtrace"
    config_files:
      - "otel.config.js"
      - "tracing.js"
      - "instrumentation.js"

  - id: observability.metrics
    name: Metrics collection
    description: Application metrics instrumentation
    type: dependency_detect
    pillar: observability
    level: L4
    required: false
    packages:
      - "prom-client"
      - "statsd-client"
      - "@opentelemetry/sdk-metrics"
      - "hot-shots"
      - "prometheus_client"

  # =============================================================================
  # PILLAR: Environment (env)
  # =============================================================================

  - id: env.dotenv_example
    name: Environment example
    description: .env.example or similar template exists
    type: any_of
    pillar: env
    level: L2
    required: false
    checks:
      - id: env.dotenv_example.standard
        type: file_exists
        name: .env.example
        pillar: env
        level: L2
        required: false
        path: .env.example
      - id: env.dotenv_template
        type: file_exists
        name: .env.template
        pillar: env
        level: L2
        required: false
        path: .env.template

  - id: env.devcontainer
    name: Devcontainer configuration
    description: Development container configuration for consistent environments (Factory L2)
    type: any_of
    pillar: env
    level: L2
    required: false
    checks:
      - id: env.devcontainer_json
        type: file_exists
        name: Devcontainer config
        pillar: env
        level: L2
        required: false
        path: .devcontainer/devcontainer.json
      - id: env.devcontainer_dockerfile
        type: file_exists
        name: Devcontainer Dockerfile
        pillar: env
        level: L2
        required: false
        path: .devcontainer/Dockerfile

  - id: env.docker_compose
    name: Local services setup
    description: Docker Compose for local development services
    type: any_of
    pillar: env
    level: L3
    required: false
    checks:
      - id: env.docker_compose_yml
        type: file_exists
        name: docker-compose.yml
        pillar: env
        level: L3
        required: false
        path: docker-compose.yml
      - id: env.docker_compose_yaml
        type: file_exists
        name: docker-compose.yaml
        pillar: env
        level: L3
        required: false
        path: docker-compose.yaml
      - id: env.compose_yml
        type: file_exists
        name: compose.yml
        pillar: env
        level: L3
        required: false
        path: compose.yml

  # =============================================================================
  # Build System CI/CD Checks (merged into Build per Factory spec)
  # =============================================================================

  - id: build.github_workflow
    name: GitHub Actions workflow
    description: CI workflow exists for GitHub Actions
    type: path_glob
    pillar: build
    level: L1
    required: false
    pattern: ".github/workflows/*.{yml,yaml}"
    min_matches: 1

  - id: build.push_trigger
    name: CI triggers on push
    description: CI workflow runs on push events
    type: github_workflow_event
    pillar: build
    level: L2
    required: false
    event: push

  - id: build.pr_trigger
    name: CI triggers on PR
    description: CI workflow runs on pull request events
    type: github_workflow_event
    pillar: build
    level: L2
    required: false
    event: pull_request

  - id: build.checkout_action
    name: Uses checkout action
    description: Workflow uses actions/checkout
    type: github_action_present
    pillar: build
    level: L2
    required: false
    action: actions/checkout
    action_pattern: "actions/checkout@[\\w\\d\\.]+"

  # =============================================================================
  # PILLAR: Task Discovery (task_discovery)
  # =============================================================================

  - id: task_discovery.issue_templates
    name: Issue templates
    description: GitHub issue templates for structured bug reports and features
    type: any_of
    pillar: task_discovery
    level: L2
    required: false
    checks:
      - id: task_discovery.issue_template_dir
        type: path_glob
        name: Issue template directory
        pillar: task_discovery
        level: L2
        required: false
        pattern: ".github/ISSUE_TEMPLATE/*.{md,yml,yaml}"
      - id: task_discovery.issue_template_single
        type: file_exists
        name: Single issue template
        pillar: task_discovery
        level: L2
        required: false
        path: .github/ISSUE_TEMPLATE.md

  - id: task_discovery.pr_template
    name: Pull request template
    description: PR template for consistent contribution format
    type: any_of
    pillar: task_discovery
    level: L2
    required: false
    checks:
      - id: task_discovery.pr_template_github
        type: file_exists
        name: GitHub PR template
        pillar: task_discovery
        level: L2
        required: false
        path: .github/PULL_REQUEST_TEMPLATE.md
      - id: task_discovery.pr_template_github_lower
        type: file_exists
        name: GitHub PR template (lowercase)
        pillar: task_discovery
        level: L2
        required: false
        path: .github/pull_request_template.md
      - id: task_discovery.pr_template_root
        type: file_exists
        name: Root PR template
        pillar: task_discovery
        level: L2
        required: false
        path: PULL_REQUEST_TEMPLATE.md

  # =============================================================================
  # PILLAR: Product & Experimentation (product)
  # =============================================================================

  - id: product.feature_flags
    name: Feature flag configuration
    description: Feature flag system for controlled rollouts (for applications, not libraries)
    type: any_of
    pillar: product
    level: L4
    required: false
    checks:
      - id: product.launchdarkly
        type: dependency_detect
        name: LaunchDarkly SDK
        pillar: product
        level: L4
        required: false
        packages:
          - "launchdarkly-node-server-sdk"
          - "@launchdarkly/node-server-sdk"
          - "launchdarkly-react-client-sdk"
      - id: product.unleash
        type: dependency_detect
        name: Unleash client
        pillar: product
        level: L4
        required: false
        packages:
          - "unleash-client"
          - "@unleash/proxy-client-react"
      - id: product.flagsmith
        type: dependency_detect
        name: Flagsmith SDK
        pillar: product
        level: L4
        required: false
        packages:
          - "flagsmith"
          - "flagsmith-nodejs"
      - id: product.growthbook
        type: dependency_detect
        name: GrowthBook SDK
        pillar: product
        level: L4
        required: false
        packages:
          - "@growthbook/growthbook"
          - "@growthbook/growthbook-react"
      - id: product.split
        type: dependency_detect
        name: Split.io SDK
        pillar: product
        level: L4
        required: false
        packages:
          - "@splitsoftware/splitio"
          - "@splitsoftware/splitio-react"

  - id: product.analytics
    name: Analytics instrumentation
    description: Product analytics for user behavior tracking (for applications, not libraries)
    type: any_of
    pillar: product
    level: L4
    required: false
    checks:
      - id: product.segment
        type: dependency_detect
        name: Segment Analytics
        pillar: product
        level: L4
        required: false
        packages:
          - "analytics-node"
          - "@segment/analytics-node"
          - "@segment/analytics-next"
      - id: product.amplitude
        type: dependency_detect
        name: Amplitude SDK
        pillar: product
        level: L4
        required: false
        packages:
          - "@amplitude/analytics-node"
          - "@amplitude/analytics-browser"
          - "amplitude-js"
      - id: product.mixpanel
        type: dependency_detect
        name: Mixpanel SDK
        pillar: product
        level: L4
        required: false
        packages:
          - "mixpanel"
          - "mixpanel-browser"
      - id: product.posthog
        type: dependency_detect
        name: PostHog SDK
        pillar: product
        level: L4
        required: false
        packages:
          - "posthog-node"
          - "posthog-js"
      - id: product.heap
        type: dependency_detect
        name: Heap Analytics
        pillar: product
        level: L4
        required: false
        packages:
          - "@heap/heap-node"
          - "heap-js"

  - id: product.ab_testing
    name: A/B testing infrastructure
    description: Experimentation framework for product changes
    type: any_of
    pillar: product
    level: L4
    required: false
    checks:
      - id: product.optimizely
        type: dependency_detect
        name: Optimizely SDK
        pillar: product
        level: L4
        required: false
        packages:
          - "@optimizely/optimizely-sdk"
          - "@optimizely/react-sdk"
      - id: product.ab_growthbook
        type: dependency_detect
        name: GrowthBook A/B
        pillar: product
        level: L4
        required: false
        packages:
          - "@growthbook/growthbook"
      - id: product.statsig
        type: dependency_detect
        name: Statsig SDK
        pillar: product
        level: L4
        required: false
        packages:
          - "statsig-node"
          - "statsig-react"
      - id: product.vwo
        type: dependency_detect
        name: VWO SDK
        pillar: product
        level: L4
        required: false
        packages:
          - "vwo-node-sdk"
